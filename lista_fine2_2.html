<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>To Do List</title>
  </head>
  <body>
    <div id="app"></div>
    <script src="https://fb.me/react-with-addons-0.14.0.js"></script>
    <script src="https://fb.me/react-dom-0.14.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.js"></script>
    <script type="text/babel">
      const {Component} = React;
      class App extends Component {
        constructor(props) {
          super(props)
          this.state = {
            lista: [],
            svolte:[]
          }
        }


        aggiungi(){
          if (ingresso.value=='') {
            alert("inserire una descrizione per l'attività")
          } else {
            this.state.lista.push(ingresso.value)
            this.forceUpdate()
            ingresso.value=''
          }

        }

        crea_li(lista_in){
          var lis2= []
          for (var i = 0; i < lista_in.length; i++) {
            lis2[i]= <li value={i} onClick= {this.cancella.bind(this)} >{lista_in[i]}</li>
          }
          return lis2
        }

        cancella(event){
          this.state.svolte.push(this.state.lista[event.target.value])
          this.state.lista.splice(event.target.value,1)
          this.forceUpdate()
        }

        pulizia(){
          this.state.lista= []
          this.state.svolte=[]
          this.forceUpdate()
        }


        render(){
          return (
            <div >
            <h1>hai {this.state.lista.length} attività da svolgere</h1>
            <ul>
            {this.crea_li(this.state.lista)}
            </ul>
            <input id='ingresso' />
            <button id='aggiungi'  onClick={this.aggiungi.bind(this)}>Aggiungi</button>
            <button id='pulisci' onClick={this.pulizia.bind(this)} >Reinizializza lista </button>
            <p>una volta aggiunta una attività cliccare su di essa per eliminarla</p>
            <p></p>
            <p></p>
            <p></p>
            <p></p>
            <h4>Ultime attività svolte</h4>
            <ul>
            {this.crea_li(this.state.svolte)}
            </ul>
            </div>
          )
        }
      }
      ReactDOM.render(<App/>, document.getElementById('app'))



    </script>
  </body>
</html>
